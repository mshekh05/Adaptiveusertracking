
<html lang="en">
    <head>
      <meta charset="utf-8" />
      <title>Table Style</title>
      <!-- <meta name="viewport" content="initial-scale=1.0; maximum-scale=1.0; width=device-width;"> -->
      <link rel="stylesheet" href="css/test.css">
      
    </head>
    <body>
        
              <h1>Welcome <span id="username" class="yellow"></pan></h1>
                <h2>Please click  <a href="http://stackoverflow.com" target="_blank">Here</a> to start tracking</h2>
               
                <div class="sub-main">
                  <button class="button-logout">Logout</button>
                </div>
            
                
      
            <div class="card effect__click">
                <div class="card__front">
                    <h2>User Login History</h2>
                    <p id="demo" class="table-log"></p>
                </div>
                <div class="card__back">
                  <span class="card__text">back</span>
                </div>
              </div>

  <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script>
      
    // var table = " <table class='table-fill'>  <thead>  <tr>  <th class='text-left'>Date</th>  <th class='text-left'>Time</th>  </tr>  </thead>  <tbody class='table-hover'> "
    table = "<table class='container'> <thead> <tr> <th><h1>Date</h1></th>              <th><h1>Time</h1></th>                          </tr>          </thead>          <tbody>"
      var myStorage = window.localStorage;
    
    
    var query = { username: username  };
    
      console.log("user: "+localStorage.getItem("username"))
      user = localStorage.getItem("username")
    // dbParam = JSON.stringify(obj);
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            myObj = JSON.parse(this.responseText);
            console.log(myObj)
            document.getElementById("username").innerHTML += '  '+ myObj.username;
            for (x in myObj.log.reverse()) {
              table+= '<tr>'
              table += "<td >" + myObj.log[x].date + "</td>";
              table += "<td >" + myObj.log[x].time + "</td>";
              table+= "</tr>"
            }
            table += "</tbody>  </table>"        
            document.getElementById("demo").innerHTML = table;
        }
    };
    xmlhttp.open("GET", "/log", true);
    
    xmlhttp.send()

  
  document.getElementById("logout").onclick = function () { 
   
    
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            
            window.location.replace('index.html');
        }
    };


    xmlhttp.open("GET", "/logout", true);
    xmlhttp.send()
 
  }

      </script>
<script>
  (function() {
    var cards = document.querySelectorAll(".card.effect__click");
    for ( var i  = 0, len = cards.length; i < len; i++ ) {
      var card = cards[i];
      clickListener( card );
    }
  
    function clickListener(card) {
      card.addEventListener( "click", function() {
        var c = this.classList;
        c.contains("flipped") === true ? c.remove("flipped") : c.add("flipped");
      });
    }
  })();
</script>

</body>
